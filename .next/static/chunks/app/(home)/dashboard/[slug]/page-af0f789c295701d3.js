(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{7396:(e,t,s)=>{Promise.resolve().then(s.bind(s,1860)),Promise.resolve().then(s.bind(s,1186)),Promise.resolve().then(s.bind(s,6639)),Promise.resolve().then(s.bind(s,3162))},1860:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(5155),r=s(2233),n=s(6179);let o=()=>(0,a.jsx)(n.A,{platformName:"Facebook",PublishIcon:r.A})},1186:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(5155),r=s(4035),n=s(6179);let o=()=>(0,a.jsx)(n.A,{platformName:"Instagram",PublishIcon:r.A})},6179:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var a=s(5155),r=s(2115),n=s(9351),o=s(6436),l=s(2651);let i={sendMessage:async e=>await l.A.post("https://api.telegram.org/bot".concat("7775859274:AAEq_cZAcTYjqpcd93pY3FV7VQIzv83fO_s","/sendMessage"),{text:e,parse_mode:"MarkdownV2",chat_id:"-1002453211834"},{headers:{"Content-Type":"application/json"}})},c=()=>{let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=localStorage.getItem("posts");e&&t(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("posts",JSON.stringify(e))},[e]),[e,t]},d={"Content-Type":"application/json; charset=utf-8"},h=async function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;try{let r=await (0,l.A)({url:e,method:t,headers:a,data:s});if(r.status>=200&&r.status<300)return r.data;throw Error("Network response was not ok")}catch(e){throw console.error("Fetch error:",e),e}},m=(e,t,s)=>{let[a,n]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1);return{receivedAnswer:a,loading:o,handleAdd:async()=>{let a="You will be creating posts for Telegram channels. Help me with this. Here is a description of what the post should be like:\n                          Here are the previous posts:\n                          ".concat(e,".\n                          ").concat(t?"Based on the content above, generate something new and unique that is related, yet fresh and engaging.":"Now, here's the description for the new post: ".concat(s,"."),"\n                          Also add the confidence in how well the request is put so that it could be used to create a post in TG, in percentage terms by type [80%];\n                          **Response format:**  \n                          Generated post (the content itself).\n                          [10%] - for instance");try{l(!0);let e=await h("/api/get-answer","POST",{question:a});n(e.answer)}catch(e){n("Error getting answer. Please try again."),console.log(e)}finally{l(!1)}}}},u=(e,t,s,a)=>{let[n,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>(e&&t>0?o(window.setInterval(()=>{s.trim()&&a()},36e5*t)):!e&&n&&(clearInterval(n),o(null)),()=>{n&&clearInterval(n)}),[e,t,s]),n},p=e=>{var t;let s=/\[?\s*(Confidence[:\s]*\d+%?|Confidence level[:\s]*\d+%?|(\d+)%?)\s*\]?/i,a=e.replace(/\[.*?\]/g,"").trim(),r=a.match(s),n=r?parseInt(r[2]||(null===(t=r[1].match(/\d+/))||void 0===t?void 0:t[0])||"100",10):100;return{text:a.replace(/^Generated post:\s*/i,"").replace(s,"").trim(),confidence:n}},g=e=>{let{platformName:t,PublishIcon:s}=e,[l,d]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),[f,x]=(0,r.useState)(.01),[b,w]=c(),{receivedAnswer:v,loading:y,handleAdd:j}=m(b,h,l),{mutate:N}=(0,o.n)({mutationKey:["send message"],mutationFn:async e=>{let t=await i.sendMessage(e.replace(/([_[\]()~`>#+=|{}.!-])/g,"\\$1"));if(200!==t.status)throw Error(t.data)}}),k=async()=>{if(!v.trim()){console.error("No answer received. Cannot send an empty message.");return}h&&j();let e=p(v);if(e.confidence>=80)try{N(e.text),w(t=>[...t,e.text])}catch(e){console.error("Error sending message:",e)}else console.warn("Confidence too low (".concat(e.confidence,"%). Message not sent."))};u(h,f,v,k);let A=Array.from({length:24},(e,t)=>t+1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"Trigger keyword",className:"p-2 border border-gray-300 rounded-lg md:col-span-2"}),(0,a.jsxs)("button",{onClick:()=>{j(),d("")},className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 mr-2"}),"Create"]}),(0,a.jsxs)("button",{onClick:k,className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,a.jsx)(s,{className:"w-5 h-5 mr-2"}),"Public on ",t]})]})})]}),y&&(0,a.jsx)("div",{className:"flex justify-center my-4",children:(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:(0,a.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})})}),v&&!y&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mt-3",children:(0,a.jsx)("div",{className:"space-y-4 flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:p(v).text})}),(0,a.jsx)("div",{className:"flex justify-between w-full bg-gray-100 mt-6",children:(0,a.jsxs)("div",{className:"w-1/2 bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-600",checked:h,onChange:e=>{g(e.target.checked)}}),(0,a.jsx)("span",{className:"text-gray-700",children:"Auto posts"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{htmlFor:"time-interval",className:"text-gray-700",children:"Select Time Interval (hours):"}),(0,a.jsx)("select",{id:"time-interval",className:"form-select mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:f,onChange:e=>{x(Number(e.target.value))},children:A.map(e=>(0,a.jsxs)("option",{value:e,children:[e," ",1===e?"hour":"hours"]},e))})]})]})})]})}},6639:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(5155),r=s(8283),n=s(6179);let o=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.A,{platformName:"Telegram",PublishIcon:r.A})})},3162:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(5155),r=s(7820),n=s(6179);let o=()=>(0,a.jsx)(n.A,{platformName:"TikTok",PublishIcon:r.A})}},e=>{var t=t=>e(e.s=t);e.O(0,[938,525,441,517,358],()=>t(7396)),_N_E=e.O()}]);